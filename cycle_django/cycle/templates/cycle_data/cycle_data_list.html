{% extends "base_generic.html" %}

{% block content %}
  <h3>Cycle ride list</h3>
  {% if cycle_data_list %}
  <ul>
    {% autoescape off %}
        {{ plot_div }}
    {% endautoescape %}
    <form method="get">
      {{ plotdataform }}
      <button type="submit">Replot</button>
      <p>(Unfortunately, plotly doesn't handle timedelta objects yet, hence all durations are given from 1970-01-01)</p>
    </form>
    {% autoescape off %}
        {{ plot_total_div }}
        {{ plot_diff_div }}
        {{ plot_frac_div }}
    {% endautoescape %}
    <p>Number of (shown) entries: {{ cycle_data_list.count }}</p>
    <table  class='table_inner_borders'>
      <tr> <th> </th> <th>Date</th> <th>Distance</th> <th>Time</th> <th>Speed</th> </tr>
      {% for entry in cycle_data_list %}
        <tr> <td>
        {% if dataset == 'day' %}
          <a href="{{ entry.get_absolute_url }}">{{ entry.entryid}}</a></td> <td>{{entry.date}}</td>
          <td>{{entry.distance}}</td> <td>{{entry.duration}}</td> <td>{{entry.speed}}
        {% elif dataset == "week" or dataset == "month" or dataset == "year"%}
          </td> <td><a href="{{ entry.get_absolute_url }}">{{ entry.date}}</a></td>
          <td>{{entry.distance}}</td> <td>{{entry.duration}}</td> <td>{{entry.speed}}
        {% else %}
          Do not know dataset: {{ dataset }}
        {% endif %}
        </td> </tr>
    {% empty %}
      There are no entries in the database.
    {% endfor %}
    </table>
  </ul>
  {% else %}
    <p>There is a problem with the database.</p>
  {% endif %}
{% endblock %}